function route (ğœŒsendProcedure) {
    synonym â²deferred message stackâ³ â‰£ [] {
        âˆ€ Å¡.routingMap ğœconnection {
            #tagQuery ğœconnection.direction {
                â–«across â–«up {
                    synonym â²output messageâ³ â‰£ ğœconnection.sender.outputs {
                        â²deferred message stackâ³/push (âŸ¨Dest connection.receiver connection.port messageâŸ©)

                    }
                }
                â–«down â–«passThrough {}
            }
        }
        âˆ€ â²deferred message stackâ³ ğœdest {
	    synonym m â‰£ âŸªğœdest.port ğœdest.message.data Å¡ ğœdest.messageâŸ« {
                ğœdest.target/handle (m ğœŒsendProcedure)
            }
        }
    }
}
/*
...
                #tagCase ğœconnection.direction {â–«across â–«up} {
                    Â« ... Â»
                }
                #tagCase ğœconnection.direction {â–«down â–«passThrough} {
                    Â«Â»
		}
            }
...
*/

/*
...
            tagCase (
                connection.direction, 
                ['across', 'up'], 
                function () {
                    var output__message = connection.sender.outputs;
		    deferred__message__stack.push ({'target': connection.receiver, 'message': message});
                    }
                );
            tagCase (
                connection.direction, 
                ['down', 'passThrough'], 
                function () {}
                );
...
*/

